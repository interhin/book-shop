{"version":3,"sources":["components/shop-header/index.js","components/shop-header/shop-header.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","utils/compose.js","components/book-list/book-list.js","components/book-list/index.js","components/shopping-cart-table/shopping-cart-table.js","components/pages/home-page.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/index.js","store.js","index.js"],"names":["ShopHeader","connect","state","numItems","orderItems","total","orderTotal","_ref","react_default","a","createElement","className","react_router_dom","to","href","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","alt","onClick","Spinner","ErrorIndicator","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","Object","assign","bookId","type","payload","compose","_len","arguments","length","funcs","Array","_key","comp","reduceRight","wrapped","f","BookList","_this$props","this","booksLoaded","booksRequested","booksError","getBooks","then","data","catch","error","_this$props2","books","loading","components_spinner","components_error_indicator","map","key","id","components_book_list_item","Component","mapDispatchToProps","newBooks","items","cartItems","dispatch","onDeleted","onDecreased","onIncreased","item","idx","count","HomePage","components_book_list","shopping_cart_table_shopping_cart_table","CartPage","App","role","components_shop_header","react_router","path","component","exact","ErrorBoundry","hasError","setState","children","BookstoreService","_this","Promise","resolve","reject","setTimeout","initialState","updateCartItems","concat","toConsumableArray","slice","updateOrder","quantity","totalQuantity","find","sameBookIdx","findIndex","newItem","undefined","_item$id","_item$title","_item$total","_item$count","updateCartItem","objectSpread","reducer","action","store","createStore","ReactDOM","render","es","error_boundry","value","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.95ee5216.chunk.js","sourcesContent":["import ShopHeader from './shop-header';\n\nexport default ShopHeader;","import React from 'react';\nimport './shop-header.css';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nconst ShopHeader = ({ numItems, total }) => {\n  return (\n    <header className=\"shop-header row\">\n      <Link to=\"/\">\n        <div className=\"logo text-dark\" href=\"#\">ReStore</div>\n      </Link>\n      <Link to=\"/cart\">\n        <div className=\"shopping-cart\">\n          <i className=\"cart-icon fa fa-shopping-cart\" />\n          {numItems} items (${total})\n        </div>\n      </Link>\n    </header>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    numItems: state.orderItems,\n    total: state.orderTotal\n  }\n}\n\nexport default connect(mapStateToProps)(ShopHeader);\n","import BookListItem from './book-list-item';\n\nexport default BookListItem;\n","import React from 'react';\nimport './book-list-item.css';\n\nconst BookListItem = ({ book, onAddedToCart }) => {\n  const { title, author, price, coverImage } = book;\n  return (\n    <div className=\"book-list-item\">\n      <div className=\"book-cover\">\n        <img src={coverImage} alt=\"cover\" />\n      </div>\n      <div className=\"book-details\">\n        <span className=\"book-title\">{title}</span>\n        <div className=\"book-author\">{author}</div>\n        <div className=\"book-price\">${price}</div>\n        <button onClick={onAddedToCart} className=\"btn btn-info add-to-cart\">Add to cart</button>\n      </div>\n\n    </div>\n  );\n};\n\nexport default BookListItem;\n","import Spinner from './spinner';\n\nexport default Spinner;\n","import React from 'react';\nimport './spinner.css';\n\nconst Spinner = () => {\n  return <div>loading...</div>;\n};\n\nexport default Spinner;\n","import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;\n","import React from 'react';\nimport './error-indicator.css';\n\nconst ErrorIndicator = () => {\n  return <div>Error!</div>;\n};\n\nexport default ErrorIndicator;\n","import React from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = React.createContext();\n\nexport {\n  BookstoreServiceProvider,\n  BookstoreServiceConsumer\n};\n","import React from 'react';\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\n\nconst withBookstoreService = () => (Wrapped) => {\n\n  return (props) => {\n    return (\n      <BookstoreServiceConsumer>\n        {\n          (bookstoreService) => {\n            return (<Wrapped {...props}\n                     bookstoreService={bookstoreService}/>);\n          }\n        }\n      </BookstoreServiceConsumer>\n    );\n  }\n};\n\nexport default withBookstoreService;\n","\nconst booksLoaded = (newBooks) => {\n  return {\n    type: 'BOOKS_LOADED',\n    payload: newBooks\n  };\n};\n\nconst booksRequested = () => {\n  return {\n    type: 'BOOKS_REQUESTED'\n  }\n};\n\nconst booksError = (error) => {\n  return {\n    type: 'BOOKS_ERROR',\n    payload:error\n  }\n};\n\nconst onAddedToCart = (bookId) => {\n  return {\n    type: 'BOOK_ADDED_TO_CART',\n    payload: bookId\n  }\n};\n\nconst onDeletedBook = (idx) => {\n  return {\n    type: 'DELETED_BOOK',\n    payload: idx\n  }\n}\n\nconst onDeletedAllBooks = (idx) => {\n  return {\n    type: 'DELETED_ALL_BOOKS',\n    payload: idx\n  }\n}\n\nexport {\n  booksLoaded,\n  booksRequested,\n  booksError,\n  onAddedToCart,\n  onDeletedBook,\n  onDeletedAllBooks\n};\n","const compose = (...funcs) => (comp) => {\n  return funcs.reduceRight(\n    (wrapped, f) => f(wrapped), comp);\n};\n\nexport default compose;\n","import React, { Component } from 'react';\nimport BookListItem from '../book-list-item';\nimport { connect } from 'react-redux';\nimport Spinner from '../spinner';\nimport ErrorIndicator from '../error-indicator';\n\nimport { withBookstoreService } from '../hoc';\nimport { booksLoaded, booksRequested, booksError, onAddedToCart } from '../../actions';\nimport { compose } from '../../utils';\n\nimport './book-list.css';\n\nclass BookList extends Component {\n\n  componentDidMount() {\n    const { bookstoreService,\n            booksLoaded,\n            booksRequested,\n            booksError } = this.props;\n    booksRequested();\n    bookstoreService.getBooks()\n      .then((data)=>{\n        booksLoaded(data);\n      })\n      .catch((error)=>{\n        booksError(error);\n      });\n  }\n\n  render() {\n    const { books, loading, error, onAddedToCart } = this.props;\n\n    if (loading) {\n      return <Spinner />;\n    }\n\n    if (error) {\n      return <ErrorIndicator />;\n    }\n\n    return (\n      <ul className=\"book-list\">\n        {\n          books.map((book) => {\n            return (\n              <li key={book.id}><BookListItem book={book} onAddedToCart={()=>{onAddedToCart(book.id)}}/></li>\n            )\n          })\n        }\n      </ul>\n    );\n  }\n}\n\nconst mapStateToProps = ({ books, loading, error }) => {\n  return { books, loading, error };\n};\n\nconst mapDispatchToProps = {\n  booksLoaded,\n  booksRequested,\n  booksError,\n  onAddedToCart\n};\n\nexport default compose(\n  withBookstoreService(),\n  connect(mapStateToProps, mapDispatchToProps)\n)(BookList);\n","import BookList from './book-list';\n\nexport default BookList;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport './shopping-cart-table.css';\nimport { onDeletedBook, onDeletedAllBooks, onAddedToCart } from '../../actions';\n\nconst ShoppingCartTable = ({ items, total, onDeleted, onIncreased, onDecreased }) => {\n\n  const renderRow = (item, idx) => {\n    const { id, total, count, title } = item;\n  \n    return (\n      <tr key={id}>\n        <td>{idx+1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>${total}</td>\n        <td>\n          <button onClick={()=>{onDeleted(id);}} className=\"btn btn-outline-danger btn-sm float-right\">\n            <i className=\"fa fa-trash-o\" />\n          </button>\n          <button onClick={()=>{onIncreased(id);}} className=\"btn btn-outline-success btn-sm float-right\">\n            <i className=\"fa fa-plus-circle\" />\n          </button>\n          <button onClick={()=>{onDecreased(id);}} className=\"btn btn-outline-warning btn-sm float-right\">\n            <i className=\"fa fa-minus-circle\" />\n          </button>\n        </td>\n      </tr>\n    );\n  };\n\n  return (\n    <div className=\"shopping-cart-table\">\n      <h2>Your Order</h2>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Price</th>\n            <th>Action</th>\n          </tr>\n          \n        </thead>\n\n        <tbody>\n          {\n            items.map(renderRow)\n          }\n        </tbody>\n      </table>\n\n      <div className=\"total\">\n        Total: ${total}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    items: state.cartItems,\n    total: state.orderTotal\n  }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onDeleted: (id) => {\n      dispatch(onDeletedAllBooks(id));\n    },\n    onDecreased: (id) => {\n      dispatch(onDeletedBook(id));\n    },\n    onIncreased: (id) => {\n      dispatch(onAddedToCart(id));\n    }\n  }\n};\n\nexport default connect(mapStateToProps,mapDispatchToProps)(ShoppingCartTable);\n","import React from 'react';\nimport BookList from '../book-list';\nimport ShoppingCartTable from '../shopping-cart-table/shopping-cart-table';\n\nconst HomePage = () => {\n  return (\n    <div>\n      <BookList />\n      <ShoppingCartTable />\n    </div>\n  );\n};\n\nexport default HomePage;\n","import React from 'react';\n\nconst CartPage = () => {\n  return <div>Cart Page</div>\n};\n\nexport default CartPage;\n","import App from './app';\n\nexport default App;\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport ShopHeader from '../shop-header';\nimport { HomePage, CartPage } from '../pages';\n\nimport './app.css';\n\nconst App = () => {\n  return (\n    <main role=\"main\" className=\"container\">\n      <ShopHeader numItems={5} total={210}/>\n      <Switch>\n        <Route\n          path=\"/\"\n          component={HomePage}\n          exact />\n\n        <Route\n          path=\"/cart\"\n          component={CartPage}\n          />\n      </Switch>\n    </main>\n  );\n};\n\nexport default App;\n","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;\n","import React, { Component } from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}","\nexport default class BookstoreService {\n\n  data = [\n    {\n      id: 1,\n      title: 'Production-Ready Microservices',\n      author: 'Susan J. Fowler',\n      price: 32,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'},\n    {\n      id: 2,\n      title: 'Release It!',\n      author: 'Michael T. Nygard',\n      price: 45,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'}\n  ];\n\n  getBooks() {\n    return new Promise((resolve,reject)=>{\n        setTimeout(()=>{\n          resolve(this.data);\n        },700);\n    });\n  }\n\n}","\nconst initialState = {\n  books: [],\n  loading: true,\n  error: null,\n  cartItems: [],\n  orderTotal: 0,\n  orderItems: 0\n};\n\nconst updateCartItems = (cartItems, item, idx) => {\n\n  if (item.count === 0) {\n    return [...cartItems.slice(0,idx),...cartItems.slice(idx+1)];\n  }\n\n  if (idx === -1) {\n    return [...cartItems, item];\n  }\n\n  return [\n    ...cartItems.slice(0,idx),\n    item,\n    ...cartItems.slice(idx+1)\n  ];\n};\n\nconst updateCartItem = (book,item = {}, quantity) => {\n  const {\n    id = book.id,\n    title = book.title,\n    total = 0,\n    count = 0} = item;\n\n  return {\n    id,\n    title,\n    total: total + quantity * book.price,\n    count: count + quantity\n  };\n};\n\nconst updateOrder = (state, bookId, quantity, totalQuantity) => {\n  const book = state.books.find(book=>book.id===bookId);\n  const sameBookIdx = state.cartItems.findIndex(item=>item.id===book.id);\n  const item = state.cartItems[sameBookIdx];\n\n  let newItem = updateCartItem(book,item, quantity);\n\n  return {\n    ...state,\n    cartItems: updateCartItems(state.cartItems,newItem,sameBookIdx),\n    orderTotal: state.orderTotal + book.price * totalQuantity,\n    orderItems: state.orderItems + quantity\n  };\n};\n\nconst reducer = (state = initialState, action) => {\n\n  switch (action.type) {\n    case 'BOOKS_REQUESTED':\n      return {\n        ...state,\n        books:[],\n        loading:true,\n        error: null\n      };\n    case 'BOOKS_LOADED':\n      return {\n        ...state,\n        books: action.payload,\n        loading: false,\n        error: null\n      };\n    case 'BOOKS_ERROR':\n      return {\n        ...state,\n        books: [],\n        loading: false,\n        error: action.payload\n      };\n    case 'BOOK_ADDED_TO_CART':\n      return updateOrder(state,action.payload,1,1);\n    case 'DELETED_BOOK':\n      return updateOrder(state,action.payload,-1,-1);\n    case 'DELETED_ALL_BOOKS':\n      const item = state.cartItems.find(({id})=>id === action.payload);\n      return updateOrder(state,action.payload,-item.count,-item.count);\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import { createStore } from 'redux';\n\nimport reducer from './reducers';\n\nconst store = createStore(reducer);\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/app';\nimport ErrorBoundry from './components/error-boundry';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}